<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Madding</title>
    <center>
        <h1>MADDING</h1>
        Username: <input type="text" id="username" placeholder="masukkan username"><br><br>
        Password: <input type="password" id="password" placeholder="masukkan password"><br><br>
        <input type="button" id="login" value="login"><br><br>
        <table>
            <thead>
                <tr>
                    <th>No</th>
                    <th>Kegiatan</th>
                    <th>Hari</th>
                    <th>Poster</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
               
            </tbody>
        </table>
        <h3></h3>
        <p></p>
    </center>
<body>
<script>
    class User{
        constructor(a,b,c){
            this.username=a
            this.password=b
            this.role=c
        }
    }

    class Madding{
        constructor(a,b,c){
            this.kegiatan=a
            this.hari=b
            this.poster=c
        }
    }

    let dataUsers=[
        new User('Fitrah','akunFan09-','admin'),
        new User('Dino','akunUser00-','user')
    ]

    var datauser=[]

    var indexedit=-1
    var indexdelete=-1

    let funcDel=(index)=>{
        indexdelete=index
    }

    let funcEdit=(index)=>{
        indexedit=index
    }

    const tampilkanTable=(role)=>{
        return dataKegiatan.map((val,index)=>{
            if(role==='user'){
                return `
                    <tr>
                        <td>${index+1}</td>
                        <td>${val.kegiatan}</td>
                        <td>${val.hari}</td>
                        <td><img src=${val.poster} alt=${val.kegiatan} height='150'</td>
                    </tr>
                `
            }else{
                return `
                    <tr>
                        <td>${index+1}</td>
                        <td>${val.kegiatan}</td>
                        <td>${val.hari}</td>
                        <td><img src=${val.poster} alt=${val.kegiatan} height='150'</td>
                        <td><input type='button' value='delete'/> <input type='button' value='edit'/></td>
                    </tr>
                `
            }
        })
    }

    let dataKegiatan=[
        new Madding('lari','senin','https://cdn1-production-images-kly.akamaized.net/P2eLZryRAlGTFR_C3Iy_KH3KMWQ=/640x360/smart/filters:quality(75):strip_icc():format(jpeg)/kly-media-production/medias/1587054/original/074117300_1494145266-20170506-Maraton-Tak-Sampai-2-Jam-di-Italia-AP-3.jpg'),
        new Madding('maling','selasa','https://cdn1-production-images-kly.akamaized.net/P2eLZryRAlGTFR_C3Iy_KH3KMWQ=/640x360/smart/filters:quality(75):strip_icc():format(jpeg)/kly-media-production/medias/1587054/original/074117300_1494145266-20170506-Maraton-Tak-Sampai-2-Jam-di-Italia-AP-3.jpg'),
        new Madding('jalan','rabu','https://cdn1-production-images-kly.akamaized.net/P2eLZryRAlGTFR_C3Iy_KH3KMWQ=/640x360/smart/filters:quality(75):strip_icc():format(jpeg)/kly-media-production/medias/1587054/original/074117300_1494145266-20170506-Maraton-Tak-Sampai-2-Jam-di-Italia-AP-3.jpg'),
    ]

    let logOut
    document.getElementById('login').addEventListener('click',()=>{
        if(datauser.length){
            alert('logout dulu')
        }else{
            var username=document.getElementById('username').value
            var password=document.getElementById('password').value
            datauser=dataUsers.filter((val)=>val.username==username && val.password==password)
            if(datauser.length){
                document.getElementsByTagName('tbody')[0].innerHTML=tampilkanTable(datauser[0].role).join('')
                document.getElementsByTagName('h3')[0].innerHTML=datauser[0].role==='admin'?'admin': datauser[0].username
                document.getElementsByTagName('p')[0].innerHTML=`<input type='button' value='Logout' onclick='logOut()'/>`
            }else{
                document.getElementsByTagName('h3')[0].innerHTML = 'Username atau password yang anda masukkan tidak sesuai'
            } 
        }
    })
</script>
</body>     
</html>